// 金刚不坏体
new entry "Passive_KFC_JinGangBuHuaiTi"
type "PassiveData"
data "DisplayName" "h86e86573gc282g4b56gb89ag4e8996f706a2;1"
data "Description" "h91389a51g2529g4c1bg8431g0b9744157463;1"
data "DescriptionParams" "2;max(1,ConstitutionModifier)"
// 无甲防御的图标(带Barbarian是金色版)
data "Icon" "PassiveFeature_UnarmoredDefense_Barbarian"
data "Properties" "IsHidden"
data "BoostConditions" "HasPassive('Passive_KFC_JinGangBuHuaiShenGong',context.Source) and not WearingArmor(context.Source)"
data "Boosts" "AC(2);DamageReduction(Piercing,Flat,max(1,ConstitutionModifier));DamageReduction(Bludgeoning,Flat,max(1,ConstitutionModifier));DamageReduction(Slashing,Flat,max(1,ConstitutionModifier))"

// 金刚不坏神功，主动开启
new entry "Passive_KFC_JinGangBuHuaiShenGong"
type "PassiveData"
data "DisplayName" "h86e86573gc282g4b56gb89ag4e8996f706a2;1"
data "Description" "h91389a51g2529g4c1bg8431g0b9744157463;1"
data "DescriptionParams" "2;5"
// 栉吾还击的图标
data "Icon" "Spell_Abjuration_MageArmor"
data "Properties" "Highlighted;IsToggled;ToggledDefaultAddToHotbar;ToggledDefaultOn"
data "BoostConditions" "not WearingArmor(context.Source)"
data "Boosts" "AC(2);Resistance(Slashing,Immune);Resistance(Piercing,Immune);Resistance(Bludgeoning,Immune);ActionResource(Movement,-5, 0)"

// 不死印法
new entry "Passive_KFC_BuSiYinFa"
type "PassiveData"
data "DisplayName" "heafd6140g8985g46e0g87a8g6c9e739a8523;1"
data "Description" "hfe9f531bg760fg475dgab51g2a71f294c35d;1"
data "DescriptionParams" "max(2*Level,Level*ConstitutionModifier+Level*DexterityModifier);1"
// 不死生物的图标
data "Icon" "GenericIcon_DamageType_Necrotic"
data "Properties" "Highlighted"
data "Boosts" "IncreaseMaxHP(max(2*Level,Level*ConstitutionModifier+Level*DexterityModifier));IF(Player() and not Tagged('DOWNED_DISABLED')):DownedStatus(HAG_DOWNED,1)"
data "StatsFunctorContext" "OnTurn"
data "Conditions" "IsDowned() and IsLastConditionRollSuccess(ConditionRollType.ConditionSavingThrow)"
data "StatsFunctors" "RegainHitPoints(1)"

// 天蚕功
new entry "Passive_KFC_TianCanGong"
type "PassiveData"
data "DisplayName" "h4590d42cg7a63g48b2gaed2g8b457fcd8fe5;1"
data "Description" "hdd847a96g0c2eg41e1ga736g00e7c38e1e5b;1"
data "DescriptionParams" "max(Level,Level*ConstitutionModifier)"
// 免疫缠绕的图标
data "Icon" "Spell_Conjuration_Web"
data "Properties" "Highlighted"
data "Boosts" "StatusImmunity(ENSNARED_VINES)"
data "StatsFunctorContext" "OnDamaged"
data "StatsFunctors" "RegainHitPoints(SELF,max(Level,Level*ConstitutionModifier));IF(not SavingThrow(Ability.Dexterity,max(10,10+DexterityModifier),false,false,context.Source)):ApplyStatus(SWAP,ENSNARED_VINES,100,1)"
