// 斗转星移：减少远程武器对你的伤害，如果你完全挡下此次攻击，则可将其投射回去。
new entry "yuwu_1"
type "InterruptData"
data "DisplayName" "h3d939e1ag9bf7g4fdeg894ag8903924c3295;1"
data "Description" "h82937870gace4g462eg8648gdfa7b2350918;1"
data "ExtraDescription" "hb9536012ge890g44adgb433gf437ace0e2fc;2"
data "Icon" "Action_EndGameAlly_FlamingFistSummon"
data "InterruptContext" "OnPreDamage"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
// 允许反应、是敌人、是角色、是远程、未变形
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and not AnyEntityIsItem() and IsRangedWeaponAttack() and not HasStatus('SG_Polymorph_BeastShape')"
data "Properties" "AdjustRoll(OBSERVER_OBSERVER,-(5d6+Level+WisdomModifier));ApplyStatus(OBSERVER_TARGET,INTERRUPT_DEFLECT_MISSILES_HIT,100,1);RestoreResource(DeflectMissiles_Charge,1,0)"
data "Cost" "ReactionActionPoint:0"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasStatus('SG_Polymorph') or Tagged('MINDFLAYER')"
data "EnableContext" "OnStatusApplied"

new entry "yuwu_2"
type "InterruptData"
data "DisplayName" "h3d939e1ag9bf7g4fdeg894ag8903924c3295;1"
data "Description" "h82937870gace4g462eg8648gdfa7b2350918;1"
data "Icon" "Action_EndGameAlly_FlamingFistSummon"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
// 允许反应、是敌人、是角色、是远程、已命中、有资源
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and not AnyEntityIsItem() and IsAttackType(AttackType.RangedWeaponAttack) and not (IsCriticalMiss() or IsMiss()) and HasActionResource('DeflectMissiles_Charge', 1, 0, false, false, context.Observer)"
data "Properties" "UseSpell(SWAP,Projectile_Deflect_Missiles,true,true,true,99636a80-29ec-4a19-a905-e0d30825c3e0);UseActionResource(OBSERVER_OBSERVER,DeflectMissiles_Charge,1,0)"
data "Cost" "ReactionActionPoint:0"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded'}) or Tagged('MINDFLAYER')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

// 太极拳：当你被近战攻击时，你可以反击。
new entry "TaiJiQuan_1"
type "InterruptData"
data "DisplayName" "h5c7ceaeag7b34g46b1g9dfcg40b86c131b16;1"
data "Description" "h4c74868ag3bfcg4a1cga605gb8987164d201;1"
data "Icon" "PassiveFeature_PurityOfBody"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
// 允许反应、是敌人、是角色、触发攻击、是近战、距离2以内、未隐身
data "Conditions" "IsAbleToReact(context.Observer) and Enemy(context.Source,context.Observer) and not AnyEntityIsItem() and HasLastAttackTriggered() and IsMeleeAttack() and not DistanceToEntityGreaterThan(2, context.ObserverPosition, context.Source) and not HasStatus('INVISIBILITY')"
data "Properties" "UseSpell(SWAP,Target_Riposte,true,true,true);ApplyStatus(OBSERVER_OBSERVER,INTERRUPT_RIPOSTE,100,0)"
data "Cost" "ReactionActionPoint:0"
data "InterruptDefaultValue" "Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded'}) or Tagged('MINDFLAYER')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

// 八荒六合唯我独尊功
new entry "busikuangnu_1"
type "InterruptData"
data "DisplayName" "hee8528f7g8e4fg4d7egb9a1g2909c3210e4d;1"
data "Description" "h31446535gb5e7g4d43g9c29gdbab01187a32;1"
data "Icon" "TadpoleSuperPower_StageFright_2"
data "InterruptContext" "OnCastHit"
data "InterruptContextScope" "Self"
data "Container" "YesNoDecision"
data "Conditions" "HasFunctor(StatsFunctorType.DealDamage) and IsHit() and HasHPPercentageLessThan(40, context.Observer)"
data "Properties" "UseSpell(OBSERVER_OBSERVER,busikuangnu_2,true,true,true)"
data "InterruptDefaultValue" "Enabled"
data "EnableCondition" "not HasStatus('SG_Blinded')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

// 北冥神功
new entry "WanXiangZiRan"
type "InterruptData"
using "Interrupt_DampenElements"
data "DisplayName" "he28bbfbageba6g4004ga271g6d531fc8821b;1"
data "Description" "hecf92689gb3cfg4a80g9c22gf3b6b0f64a4f;1"
data "DescriptionParams" "1d10"
data "Icon" "PassiveFeature_AbsorbElements"
data "InterruptContextScope" "Self"
data "Conditions" "IsAbleToReact(context.Observer) and Self(context.Target,context.Observer) and (SpellDamageTypeIs(DamageType.Acid) or SpellDamageTypeIs(DamageType.Cold) or SpellDamageTypeIs(DamageType.Fire) or SpellDamageTypeIs(DamageType.Lightning) or SpellDamageTypeIs(DamageType.Thunder)) and not AnyEntityIsItem()"
data "Properties" "SetDamageResistance(Acid);SetDamageResistance(Cold);SetDamageResistance(Fire);SetDamageResistance(Lightning);SetDamageResistance(Thunder);ApplyStatus(OBSERVER_TARGET, ABSORB_ELEMENTS_ACTIVE,100,1)"
data "Cost" "ReactionActionPoint:1"
data "Cooldown" "OncePerTurn"
data "EnableCondition" "not HasStatus('SG_Polymorph') and HasActionResource('Interrupt_AbsorbElements', 1, 0, false, false, context.Source)"
data "EnableContext" "OnActionResourcesChanged"
