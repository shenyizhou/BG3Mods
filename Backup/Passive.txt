// 六合八荒唯我独尊功
new entry "busikuangnu"
type "PassiveData"
data "DisplayName" "hee8528f7g8e4fg4d7egb9a1g2909c3210e4d;1"
data "Description" "h31446535gb5e7g4d43g9c29gdbab01187a32;1"
data "Icon" "TadpoleSuperPower_StageFright_2"
data "Properties" "Highlighted"
data "Boosts" "UnlockInterrupt(busikuangnu_1)"

// 攻击获得闪电充能
new entry "Passive_KFC_QL_ChargedLightning_Attack"
type "PassiveData"
data "DisplayName" "h48fd8d70gf4c4g44b6ga261gc6e09bb1efd6;1"
data "Description" "h56131a51g3406g458agaf7bg31c6c618b69e;1"
data "DescriptionParams" "max(1,DexterityModifier);DealDamage(2d8,Lightning)"
// 闪电灵光的图标
data "Icon" "Action_LightningAura"
data "Properties" "IsHidden"
// todo: remove
data "BoostConditions" "HasPassive('Passive_KFC_QingLong',context.Source)"
data "Boosts" "AC(2)"
data "StatsFunctorContext" "OnAttack"
// 简化条件
data "Conditions" "HasPassive('Passive_KFC_QingLong',context.Source)"
data "StatsFunctors" "IF(not HasStatus('MAG_CHARGED_LIGHTNING',context.Source)):ApplyStatus(SELF,MAG_CHARGED_LIGHTNING_LIGHTNING_DAMAGE_ONCE_TECHNICAL,100,0);IF(Character()):ApplyStatus(SELF,MAG_CHARGED_LIGHTNING_GENERATE_CHARGE_FX,100,0);IF(Character() and not IsDischargingLightning(context.Source)):ApplyStatus(SELF,MAG_CHARGED_LIGHTNING,100,max(1,DexterityModifier));ApplyStatus(SELF,MAG_CHARGED_LIGHTNING_DURATION_TECHNICAL,100,1)"

// 在有闪电充能时，受到伤害附加感电，类似电流反击，难度调高
new entry "Passive_KFC_QL_ChargedLightning_Electrocute_Armor"
type "PassiveData"
data "DisplayName" "h401c9cedg0416g44a4g8843gfcf6bb59afcd;1"
data "Description" "haa72b5bcg5bffg4b72g9839g8ba6ca671afb;1"
data "DescriptionParams" "max(15,15+DexterityModifier)"
// 闪电释能的图标
data "Icon" "Action_LightningBlast"
data "Properties" "IsHidden"
// todo: remove
data "BoostConditions" "HasPassive('Passive_KFC_QingLong',context.Source)"
data "Boosts" "AC(3)"
data "StatsFunctorContext" "OnDamaged"
data "Conditions" "HasPassive('Passive_KFC_QingLong',context.Source) and not SavingThrow(Ability.Dexterity,max(15,15+DexterityModifier),false,false,context.Source) and HasStatus('MAG_CHARGED_LIGHTNING')"
data "StatsFunctors" "ApplyStatus(SWAP,MAG_CHARGED_LIGHTNING_SHOCK_FX,100,0);IF(HasStatus('MAG_CHARGED_LIGHTNING')):ApplyStatus(SWAP,SHOCKED,100,1)"

// 检定加成，类似充能闪电
new entry "Passive_KFC_QL_ChargedLightning_AbilityCheckBoost"
type "PassiveData"
data "DisplayName" "hda7854f2gdc96g46a9gbcaeg35e3ba1ee43e;1"
data "Description" "h31574939g5fadg408fgb34cg99d89e1118e4;1"
data "DescriptionParams" "max(1,DexterityModifier)"
// 毕竟带着无视免疫，用的元素导师的图标
data "Icon" "PassiveFeature_ElementalAdept_Lightning"
data "Properties" "IsHidden"
// todo: remove
data "BoostConditions" "HasPassive('Passive_KFC_QingLong',context.Source)"
data "Boosts" "AC(4)"
data "StatsFunctorContext" "OnStatusRemoved;OnStatusApplied"
data "Conditions" "HasPassive('Passive_KFC_QingLong',context.Source)"
data "StatsFunctors" "IF(context.HasContextFlag(StatsFunctorContext.OnStatusRemoved) and not HasStatus('MAG_CHARGED_LIGHTNING')):RemoveStatus(MAG_CHARGED_LIGHTNING_ABILITY_CHECK_BOOST);IF(context.HasContextFlag(StatsFunctorContext.OnStatusApplied) and StatusId('MAG_CHARGED_LIGHTNING')):ApplyStatus(MAG_CHARGED_LIGHTNING_ABILITY_CHECK_BOOST,100,-max(1,DexterityModifier))"

// 朱雀相关
new entry "Passive_KFC_ZhuQue"
type "PassiveData"
data "DisplayName" "h3b592d2fgbaddg4a6dg9164g4f7ae5231336;1"
data "Description" "h159375b1g02b1g4e94gb408g4fca44bea26c;1"
// 都用龙族血统的icon好了，火焰用的红龙
data "Icon" "PassiveFeature_DraconicAncestry_Red"
data "Properties" "IsToggled;Highlighted;ToggledDefaultAddToHotbar"
data "StatsFunctorContext" "OnCreate"
data "StatsFunctors" "ApplyStatus(SELF, STATUS_KFC_ZHUQUE, 100, -1)"
data "ToggleGroup" "KFC_Myth"

new entry "Passive_KFC_ZQ_FireShield"
type "PassiveData"
data "DisplayName" "h967349e8g79acg4187gb87egaed902982c8a;1"
data "Description" "hb6cc3a06gbe30g4fc9gada9gc8d15a7d9f8e;1"
data "DescriptionParams" "DealDamage(2d8,Fire)"
data "Icon" "Spell_Evocation_FireShield_Warm"
data "Properties" "IsHidden"
data "StatsFunctorContext" "OnAttacked"
data "Conditions" "IsMeleeAttack() and HasDamageEffectFlag(DamageFlags.Hit)"
data "StatsFunctors" "ApplyStatus(PASSIVE_FIRE_SHIELD_WARM,100,0);ApplyStatus(SELF,PASSIVE_FIRE_SHIELD_WARM_ATTACKER,100,0);DealDamage(SWAP,2d8,Fire,Magical);ApplyStatus(PASSIVE_FIRE_SHIELD_CHILL,100,0);ApplyStatus(SELF,PASSIVE_FIRE_SHIELD_CHILL_ATTACKER,100,0);DealDamage(SWAP,2d8,Cold,Magical)"
